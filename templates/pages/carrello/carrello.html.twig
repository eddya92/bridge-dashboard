{% extends 'layouts/interno.html.twig' %}
{% block title %}{% trans %}Carrello{% endtrans %}{% endblock %}

    {% block css_page %}
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description"
              content="Cuba admin is super flexible, powerful, clean &amp; modern responsive bootstrap 5 admin template with unlimited possibilities.">
        <meta name="keywords"
              content="admin template, Cuba admin template, dashboard template, flat admin template, responsive admin template, web app">
        <meta name="author" content="pixelstrap">
        <link rel="icon" href="../assets/images/favicon.png" type="image/x-icon">
        <link rel="shortcut icon" href="../assets/images/favicon.png" type="image/x-icon">
        <link href="https://fonts.googleapis.com/css?family=Rubik:400,400i,500,500i,700,700i&amp;display=swap"
              rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i,900&amp;display=swap"
              rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="../assets/css/vendors/themify.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
              integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg=="
              crossorigin="anonymous" referrerpolicy="no-referrer"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css"
              integrity="sha512-Cv93isQdFwaKBV+Z4X8kaVBYWHST58Xb/jVOcV9aRsGSArZsgAnFIhMpDoMDcFNoUtday1hdjn0nGp3+KZyyFw=="
              crossorigin="anonymous" referrerpolicy="no-referrer"/>
        <link rel="stylesheet" type="text/css" href="../assets/css/vendors/scrollbar.css">
        <link rel="stylesheet" type="text/css" href="../assets/css/vendors/select2.css">
        <link rel="stylesheet" type="text/css" href="../assets/css/vendors/datatables.css">
        <link rel="stylesheet" type="text/css" href="../assets/css/vendors/datatable-extension.css">
        <link rel="stylesheet" type="text/css" href="../assets/css/vendors/animate.css">
        <link rel="stylesheet" type="text/css" href="../assets/css/vendors/chartist.css">
        <link rel="stylesheet" type="text/css" href="../assets/css/vendors/date-picker.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/css/bootstrap.min.css"
              integrity="sha512-usVBAd66/NpVNfBge19gws2j6JZinnca12rAe2l+d+QkLU9fiG02O1X8Q6hepIpr/EYKZvKx/I9WsnujJuOmBA=="
              crossorigin="anonymous" referrerpolicy="no-referrer"/>
        <link rel="stylesheet" type="text/css" href="../assets/css/style.css">
        <link id="color" rel="stylesheet" href="../assets/css/color-1.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../assets/css/responsive.css">
    {% endblock css_page %}

{% block page_body %}
    <div class="page-body">
        <!-- region titolo e breadcrumb -->
        <div class="container-fluid">
            <div class="page-title">
                <div class="row">
                    <div class="col-sm-6 order-sm-1">
                        <div class="mb-3 d-block d-sm-none"></div>
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="{{ path('ingresso') }}"><i data-feather="home"></i></a>
                            </li>
                            <li class="breadcrumb-item">{% trans %}Virtual Office{% endtrans %}</li>
                            <li class="breadcrumb-item active">{% trans %}Carrello{% endtrans %}</li>
                        </ol>
                        <div class="mb-2 d-block d-sm-none"></div>
                    </div>
                    <div class="col-sm-6 order-sm-0">
                        <div class="float-sm-start">
                            <h3>{% trans %}Carrello{% endtrans %}</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- endregion Titolo e breadcrumb -->
        <!-- Container-fluid starts-->
        <div class="container-fluid">
            {% include 'layouts/partials/session_message.html.twig' %}

            <div class="row">
                <div class="col-sm-12">
                    <div class="card">
                        <div class="card-header">
                            <h5>{% trans %}Controlla la merce inserita nel carrello prima di concludere l'ordine{% endtrans %}.</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="order-history table-responsive wishlist">
                                    <table class="table table-bordered">
                                        <thead>
                                        <tr>
                                            <th class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile"></th>
                                            <th class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile"></th>
                                            <th class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile">
                                                {% trans %}Articolo{% endtrans %}
                                            </th>
                                            <th class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile">
                                                {% trans %}Punti{% endtrans %}
                                            </th>
                                            <th class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile">
                                                {% trans %}Prezzo{% endtrans %}
                                            </th>
                                            <th class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile">
                                                {% trans %}Quantit√†{% endtrans %}
                                            </th>
                                            <th class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile">
                                                {% trans %}Totale Punti{% endtrans %}
                                            </th>
                                            <th class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile">
                                                {% trans %}Totale{% endtrans %}
                                            </th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for articolo in carrello.articoli %}
                                            <tr>
                                                <td>
                                                    <a onclick="eliminaArticolo({{ articolo.id }}, {{ articolo.id_variante }});"><i data-feather="x-circle"></i></a>
                                                </td>
                                                <td>
                                                    <img class="img-fluid img-40" src="{% if articolo.foto | length > 0 %}{{ articolo.foto[0].url }}{% else %}{{ asset('assets/images/not-found.png') }}{% endif %}" alt="#">
                                                </td>
                                                <td class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile">
                                                    <div class="product-name">
                                                        <a href="{{ path('articolo', {'id': articolo.id}) }}">{{ articolo.nome | raw }}</a>
                                                    </div>
                                                </td>
                                                <td class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile" id="punti_{{ articolo.id }}">
                                                    {{ articolo.punti }}
                                                </td>
                                                <td class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile" id="prezzo_{{ articolo.id }}">
                                                    {{ articolo.prezzo }}
                                                </td>
                                                <td>
                                                    <div class="d-block d-sm-none d-md-none d-lg-none d-xl-none d-xxl-none">
                                                        <div class="product-name">
                                                            <a href="{{ path('articolo', {'id': articolo.id}) }}">{{ articolo.nome | raw }}</a>
                                                        </div>
                                                        <br/>{{ articolo.punti }}
                                                        <br/>{{ articolo.prezzo }}
                                                    </div>
                                                    <div class="m-b-10"></div>
                                                    <fieldset class="qty-box">
                                                        <div class="input-group">
                                                            <input class="touchspin text-center" data-bts-step="{{ articolo.quantita_multipla }}" id="quantita_{{ articolo.id }}" onchange="aggiornaArticolo({{ articolo.id }}, {{ articolo.id_variante }}, this.value);" type="text" value="{{ articolo.quantita }}" min="{{ articolo.quantita_multipla }}" {% if articolo.quantita_max > 0 %}max="{{ articolo.quantita_max }}"{% endif %} step="{{ articolo.quantita_multipla }}">
                                                        </div>
                                                    </fieldset>
                                                </td>
                                                <td style="width:180px;" class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile" id="totale_{{ articolo.id }}">
                                                    {{ articolo.totale_punti }}
                                                </td>
                                                <td style="width:180px;" class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile" id="totale_punti_{{ articolo.id }}">
                                                    {{ articolo.totale_prezzo }}
                                                </td>
                                            </tr>
                                        {% endfor %}
                                        <tr>
                                            <td class="text-end d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile" style="vertical-align: top !important;" colspan="6">
                                                {% trans %}Totale{% endtrans %}
                                            </td>
                                            <td class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile">
                                                <span class="f-w-600">{{ carrello.punti }}</span>
                                                <div class="m-b-20"></div>
                                            </td>
                                            <td class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile">
                                                <span class="f-w-600">{{ carrello.totale }}</span>
                                                <div class="m-b-20"></div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-end d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile" colspan="6">
                                                <a class="btn btn-outline-light txt-dark cart-btn-transform" href="{{ path('shop') }}">{% trans %}Continua con lo shopping{% endtrans %}</a>
                                            </td>
                                            <td class="d-none d-sm-block d-md-block d-lg-block d-xl-block d-xxl-block display-table-cell-hidden-mobile"
                                                colspan="2">
                                                <a class="btn btn-primary cart-btn-transform" href="{{ path('checkout') }}">{% trans %}Vai al checkout{% endtrans %}</a>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <div class="m-b-20"></div>
                                    <div class="d-sm-none d-md-none d-lg-none d-xl-none d-xxl-none text-center m-auto">
                                        {% trans %}Totale{% endtrans %}
                                        <div class="m-b-20"></div>
                                        <span class="f-w-600">{{ carrello.punti }}</span>
                                        <div class="m-b-20"></div>
                                        <span class="f-w-600">{{ carrello.totale }}</span>
                                    </div>
                                    <div class="m-b-20"></div>
                                    <div class="d-sm-none d-md-none d-lg-none d-xl-none d-xxl-none text-center m-auto">
                                        <a class="btn btn-primary cart-btn-transform width_100" href="{{ path('checkout') }}">{% trans %}Vai al checkout{% endtrans %}</a>
                                    </div>
                                    <div class="m-b-20"></div>
                                    <div class="d-sm-none d-md-none d-lg-none d-xl-none d-xxl-none text-center m-auto">
                                        <a class="btn btn-outline-light txt-dark cart-btn-transform width_100" href="{{ path('shop') }}">{% trans %}Continua con lo shopping{% endtrans %}</a>
                                    </div>
                                    <div class="m-b-20"></div>
                                </div>
                            </div>
                        </div>
                        <!-- Container-fluid Ends-->
                    </div>
                </div>
            </div>
        </div>
        <!-- Container-fluid Ends-->
    </div>
{% endblock page_body %}

{% block javascript %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/js/bootstrap.bundle.min.js"
        integrity="sha512-72WD92hLs7T5FAXn3vkNZflWG6pglUDDpm87TeQmfSg8KnrymL2G30R7as4FmTwhgu9H7eSzDCX3mjitSecKnw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.28.0/feather.min.js"
        integrity="sha512-7x3zila4t2qNycrtZ31HO0NnJr8kg2VI67YLoRSyi9hGhRN66FHYWr7Axa9Y1J9tGYHVBPqIjSE1ogHrJTz51g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/simplebar/5.3.5/simplebar.min.js"
        integrity="sha512-PXNAvB6wWywrk43aV52x7sFuo+m/2cUJYGNGYe+frlHLVMd4vEMEAvHFg1b88wECIk7r/TOejo5xL63Uf/JmHg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/jquery.dataTables.min.js"
        integrity="sha512-BkpSL20WETFylMrcirBahHfSnY++H2O1W+UnEEO4yNIl+jI2+zowyoGJpbtk6bx97fBXf++WJHSSK2MV4ghPcg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"
        integrity="sha512-2ImtlRlf2VVmiGZsjm9bEyhjGW4dU7B6TNwh/hx/iSByxNENtj3WVE6o/9Lj4TJeVXPi4bnOIMXFIJJAeufa0A=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="../assets/js/datepicker/date-picker/datepicker.js"></script>
<script src="../assets/js/icons/feather-icon/feather-icon.js"></script>
<script src="../assets/js/scrollbar/custom.js"></script>
<script src="../assets/js/config.js"></script>
<script src="../assets/js/sidebar-menu.js"></script>
<script src="../assets/js/tooltip-init.js"></script>
<script src="../assets/js/notify/bootstrap-notify.min.js"></script>
<script src="../assets/js/notify/index.js"></script>
<script src="../assets/js/touchspin/vendors.min.js"></script>
<script src="../assets/js/touchspin/touchspin.js"></script>
<script src="../assets/js/touchspin/input-groups.min.js"></script>
<script src="../assets/js/script.js"></script>
<script src="../assets/js/theme-customizer/customizer.js"></script>

{% endblock javascript %}

{% block javascript_page %}

    <script>
		function aggiornaArticolo(id_articolo, id_variante, quantita){
			location.href = '{{ path('aggiorna-articolo') }}?id=' + id_articolo + '&idv=' + id_variante + '&qty=' + quantita;
		}

		function eliminaArticolo(id_articolo, id_variante){
			location.href = '{{ path('elimina-articolo') }}?id=' + id_articolo + '&idv=' + id_variante;
		}
    </script>

    <script>

    </script>

{% endblock javascript_page %}
